<%
collapsed ||= false
is_edit = ["edit", "update"].include? params[:action]
-%>

<fieldset class="collapsible <%= "collapsed" if !@occasion && !collapsed %>">

  <legend><%= is_edit ? "Redigera" : "Lägg till" %> föreställning</legend>

  <% form_for(@occasion || Occasion.new { |o| o.event_id = event.id },
    :builder => KPFormBuilder,
    :html => { :class => "occasion-form" }) do |f| -%>

    <%= f.validation_error_indicator -%>

    <% f.fields do %>

      <%= f.text_field :date, :class => "date-field auto" %>
      <%= f.time_select :start_time, :minute_step => 5 %>
      <%= f.time_select :stop_time, :minute_step => 5 %>
      <%= f.text_field :seats %>
      <%= f.text_field :wheelchair_seats %>
      <%= f.text_area :address, :rows => 5 %>
      <%= f.text_area :description, :rows => 5 %>
      <%= f.check_box :telecoil %>

      <% f.buttons do %>
        <%= f.hidden_field :event_id %>
        <%= f.submit(is_edit ? "Uppdatera" : "Lägg till") %>
      <% end %>

    <% end %>

  <% end -%>

</fieldset>
