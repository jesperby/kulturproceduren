<%
category_groups ||= []
-%>

<table class="calendar-list">
  <thead>
    <tr>
      <th>Datum</th>
      <th>Evenemang</th>
      <th>Arrang√∂r</th>

      <% category_groups.each do |category_group| -%>
        <th><%= h category_group.name %></th>
      <% end -%>
    </tr>
  </thead>

  <tbody>

    <% events.each do |event| -%>

      <tr class="<%= cycle('', 'even')  %>">
        <td class="date"><%= l event.visible_from %> - <%= l event.visible_to %></td>
        <td class="event"><%= link_to h(event.name), event %></td>

        <td class="culture-provider"><%= link_to h(event.culture_provider.name), event.culture_provider %></td>

        <% category_groups.each do |category_group| -%>
          <td class="categories">
            <%= h(event.categories.select { |c| c.category_group_id == category_group.id }.map { |c| c.name }.join(", ")) %>
          </td>
        <% end -%>

      </tr>
    <% end -%>
  </tbody>
</table>
