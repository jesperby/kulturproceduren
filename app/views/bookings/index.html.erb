<%= render partial: "menu" -%>

<% if params[:occasion_id] || params[:event_id] %>
  <div class="filter-tools">

    <%
    if params[:occasion_id]
      url = apply_filter_occasion_bookings_path()
    elsif params[:event_id]
      url = apply_filter_event_bookings_path()
    end
    %>

    <%= form_tag url do %>
      <% filter = (session[:booking_list_filter] || {}) %>
      <ul>
        <li class="district-filter">
          <label for="kp-booking-filter-district_id">Stadsdel:</label>
          <%= select_tag "district_id",
            options_from_collection_for_select(@districts, :id, :name, filter[:district_id]).insert(0,'<option value="all">Alla</option>'),
            id: "kp-booking-filter-district_id"
          %>
        </li>
        <% if current_user.has_role?(:admin) %>
          <li class="district-filter">
            <%= check_box_tag "unbooked", 1, filter[:unbooked], id: "kp-booking-filter-unbooked" %>
            <label for="kp-booking-filter-unbooked">Visa avbokade</label>
          </li>
        <% end %>
      </ul>
      <div class="button-container">
        <input type="submit" value="Visa"/>
      </div>
    <% end %>
  </div>
<% end %>

<%= render partial: "list", locals: { bookings: @bookings } %>
